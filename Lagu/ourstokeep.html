<!DOCTYPE html>
<html>
<head>
  <title>Lyric Visualizer Animasi + Video Reff</title>
  <style>
   body {
  margin: 0;
  padding: 0;
  font-family: Arial, sans-serif;
  background: url('bacgkroundselena.jpg') no-repeat center bottom fixed;
  background-size: cover;
  color: white;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
}

    .container {
      position: relative;
      width: 400px;
      height: 400px;
      overflow: hidden;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(255,255,255,0.3);
    }
    /* Slide gambar */
.slide {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: cover;
  background-size: cover;
  background-position: center;
  opacity: 0;
  transition: opacity 1s;
}

/* Video reff */
video {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;      /* isi penuh container */
  object-position: center; /* biar center */
  opacity: 0;
  transition: opacity 1s;
}

    .slide.active, video.show {
      opacity: 1;
    }
    .lyrics {
      margin-top: 20px;
      font-size: 20px;
      font-weight: bold;
      text-shadow: 2px 2px 5px black;
      min-height: 30px;
    }

    /* === Animasi Lirik === */
    .fade {
      opacity: 0;
      transform: translateY(10px);
      animation: fadeIn 1s forwards;
    }
    @keyframes fadeIn {
      to { opacity: 1; transform: translateY(0); }
    }

    .slideIn {
      opacity: 0;
      transform: translateX(-50px);
      animation: slideIn 0.8s forwards;
    }
    @keyframes slideIn {
      to { opacity: 1; transform: translateX(0); }
    }

    .zoom {
      opacity: 0;
      transform: scale(0.8);
      animation: zoomIn 0.8s forwards;
    }
    @keyframes zoomIn {
      to { opacity: 1; transform: scale(1); }
    }

    /* Progress bar */
    .progress-container {
      width: 400px;
      margin-top: 15px;
    }
    input[type=range] {
      width: 100%;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Background slide -->
    <div class="slide" style="background-image: url('selena.jpg');"></div>
    <div class="slide" style="background-image: url('selena1.jpg');"></div>
    <div class="slide" style="background-image: url('selena2.jpg');"></div>

    <!-- Video reff -->
    <video id="reffVideo" src="videoselena1.mp4" muted></video>
  </div>

  <!-- Lirik -->
  <div class="lyrics" id="lyrics">...</div>

  <!-- Progress Bar -->
  <div class="progress-container">
    <input type="range" id="progress" value="0" min="0" max="100" step="0.1">
  </div>

  <!-- Audio -->
  <audio id="lagu" src="ours_to_keep.mp3"></audio>
  <br>
  <button onclick="playMusic()">▶ Play</button>
  <button onclick="pauseMusic()">⏸ Pause</button>

  <script>
    let audio = document.getElementById("lagu");
    let lyricsEl = document.getElementById("lyrics");
    let slides = document.querySelectorAll(".slide");
    let progressBar = document.getElementById("progress");
    let currentSlide = 0;
    let videoEl = document.getElementById("reffVideo");

    // Data lirik lengkap + animasi
    let lyricData = [
      { time: 0, text: "..." },
      { time: 10, text: "How are you in your time alone?", anim: "fade" },
      { time: 14, text: "I'm doing fine", anim: "fade" },
      { time: 16, text: "Well, I'm not", anim: "fade" },
      { time: 17, text: "I feel like I wanna die", anim: "fade" },
      { time: 21, text: "I have so much to tell you, love", anim: "fade" },
      { time: 25, text: "From the start of the day 'til the dawn breaks away", anim: "fade" },
      { time: 32, text: "I've been thinking of you", anim: "fade" },
      { time: 35, text: "And I've been missing your voice on the other side", anim: "fade" },
      { time: 42, text: "And I've been dreaming of you", anim: "fade" },
      { time: 46, text: "And I can hear you singing through the Silent Night", anim: "fade" },
      { time: 52, text: "Do you ever feel the need to get away from me?", anim: "fade" },
      { time: 58, text: "Do I bore you?", anim: "fade" },
      { time: 62, text: "Or do you want to take me from this crowded place to", anim: "fade" },
      { time: 67, text: "Somewhere we can find some peace", anim: "fade" },
      { time: 71, text: "And the world is ours to keep", anim: "fade" },
      { time: 79, text: "Hm.....", anim: "fade" },
      { time: 85, text: "They don't have to know how we touch", anim: "fade" },
      { time: 89, text: "Cause this feeling's all ours", anim: "fade" },
      { time: 92, text: "They'd become so loud trying to", anim: "fade" },
      { time: 96, text: "Fix what was never really broken", anim: "fade" },
      { time: 100, text: "And you are my safe haven", anim: "fade" },
      { time: 102, text: "I am on your side", anim: "fade" },
      { time: 107, text: "Do you ever feel the need to get away from me?", anim: "fade" },
      { time: 112, text: "Do I bore you?", anim: "fade" },
      { time: 116, text: "Or do you want to take me from this crowded place to", anim: "fade" },
      { time: 121, text: "Somewhere we can find some peace", anim: "fade" },
      { time: 125, text: "And the world is ours to keep", anim: "fade" },
      { time: 133, text: "Hm.....", anim: "fade" },
      { time: 138, text: "In this world, we are fading away", anim: "fade" },
      { time: 142, text: "And I'm not fine", anim: "fade" },
      { time: 144, text: "Sometimes, it gets so lonely", anim: "fade" },
      { time: 146, text: "But I'm still scared to ask for help", anim: "fade" },
      { time: 149, text: "But I'll look at you the same as today", anim: "fade" },
      { time: 152, text: "The one that I've been needing", anim: "fade" },
      { time: 155, text: "I never thought I'd have", anim: "fade" },
      { time: 160, text: "I've been thinking of you", anim: "fade" },
      { time: 164, text: "And I've been missing your voice on the other side", anim: "fade" },
      { time: 170, text: "Do you ever feel the need to get away from me?", anim: "fade" },
      { time: 176, text: "Do I bore you?", anim: "fade" },
      { time: 180, text: "Or do you want to take me from this crowded place to", anim: "fade" },
      { time: 185, text: "Somewhere we can find some peace", anim: "fade" },
      { time: 189, text: "And the world is ours to keep", anim: "fade" }
    ];

    function updateLyrics(currentTime) {
  for (let i = lyricData.length - 1; i >= 0; i--) {
    if (currentTime >= lyricData[i].time) {
      if (lyricsEl.textContent !== lyricData[i].text) {
        lyricsEl.textContent = lyricData[i].text;
        lyricsEl.className = "lyrics"; 
        void lyricsEl.offsetWidth;
        lyricsEl.classList.add(lyricData[i].anim);
      }
      break;
    }
  }

  if(currentTime >= 52 && currentTime <= 71){
    // sembunyikan semua slide dan hentikan animasi
    slides.forEach(s => {
        s.classList.remove("active");
        s.style.transition = "none"; // hentikan efek zoom/fade
    });

    // tampilkan video
    if(!videoEl.classList.contains("show")){
        videoEl.classList.add("show");
        videoEl.currentTime = 0;
        if(!audio.paused) videoEl.play();
    }
} else {
    // sembunyikan video
    if(videoEl.classList.contains("show")){
        videoEl.pause();
        videoEl.classList.remove("show");

        // tampilkan slide terakhir
        slides[currentSlide].classList.add("active");
        slides.forEach(s => s.style.transition = "opacity 1s"); // aktifkan animasi lagi
    }
}
}

    // Update progress dan lirik saat audio jalan
    audio.addEventListener("timeupdate", () => {
      updateLyrics(audio.currentTime);
      progressBar.value = (audio.currentTime / audio.duration) * 100 || 0;
    });

    // Seek manual lewat progress
    progressBar.addEventListener("input", () => {
      audio.currentTime = (progressBar.value / 100) * audio.duration;
      updateLyrics(audio.currentTime);
    });

    // Slide background tiap 20 detik
    setInterval(() => {
      slides[currentSlide].classList.remove("active");
      currentSlide = (currentSlide + 1) % slides.length;
      slides[currentSlide].classList.add("active");
    }, 20000);

    function playMusic() { audio.play(); }
    function pauseMusic() { audio.pause(); }

    slides[0].classList.add("active");
  </script>
</body>
</html>
